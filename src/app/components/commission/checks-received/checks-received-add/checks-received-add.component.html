<div class="content-wrapper" *ngIf="currentUser">
  <section class="content-header">
    <ol class="breadcrumb">
      <li><a href="#">Workspace</a></li>
      <li><a href="/checksreceiveds">My Checks Recieved</a></li>
      <li class="active">Check Recieved</li>
    </ol>
    <h1>
      <i class="fa">
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
             viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
        <g>
        <g>
        <path d="M499.727,307.701c-12.301-9-29.401-7.2-39.6,3.9l-81,100.8c-5.7,6-16.5,9.6-22.2,9.6c-57.449,0-43.678,0-101.175,0
                                c-4.805,0-9.346,2.314-12.158,6.211c-4.878,6.694-14.238,8.188-20.947,3.369c-6.709-4.849-8.218-14.224-3.369-20.947
                                C227.7,398.973,241.338,392,255.752,392c20.38,0,74.449,0,91.274,0c16.5,0,30-13.5,30-30s-13.5-30-30-30
                                c-23.813,0-54.593,0-78.6,0c-3.102,0-7.343-1.425-9.994-3.75c-19.775-17.39-35.369-27.543-62.849-31.086
                                c-0.016-0.002-0.031-0.002-0.048-0.004c-29.123-3.748-60.504,4.336-83.885,24.893c-5.806,5.116-13.063,7.787-20.625,8.906V512h256
                                c28.201,0,55.202-13.5,72.002-36l86.999-126C515.927,336.8,513.226,317.601,499.727,307.701z" />

                            </g>
                        </g>
        <g>
        <g>
        <path d="M15.026,332c-8.284,0-15,6.716-15,15v150c0,8.284,6.716,15,15,15h46V332H15.026z" />

                            </g>
                        </g>
        <g>
        <g>
        <path d="M317.026,0c-82.705,0-150,68.295-150,151s67.295,151,150,151s150-68.295,150-151S399.731,0,317.026,0z M279.526,91
                                c8.284,0,15,6.716,15,15s-6.716,15-15,15s-15-6.716-15-15S271.242,91,279.526,91z M354.526,211c-8.284,0-15-6.716-15-15
                                s6.716-15,15-15s15,6.716,15,15S362.81,211,354.526,211z M366.055,115.61l-75,90c-5.297,6.341-14.722,7.233-21.138,1.919
                                c-6.357-5.303-7.222-14.766-1.919-21.138l75-90c5.303-6.357,14.751-7.222,21.138-1.919
                                C370.493,99.775,371.358,109.238,366.055,115.61z" />

                            </g>
                        </g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
        <g></g>
                    </svg>
      </i>
      <div class="h1txt">Check Recieved</div>
    </h1>
  </section>

         <section class="col-lg-12">
            <div class="col-md-12 no-padding">
               <div class="panel-heading">
                  <ul class="nav nav-tabs">
                     <li class="active"><a href="#tab1default" data-toggle="tab">Check Information</a></li>
                     <li><a href="#tab2default" data-toggle="tab">Reconciled <span class="badge bg-purple">{{PtotalRecords}}</span></a></li>
                     <li><a href="#tab3default" data-toggle="tab">Adjustments <span class="badge bg-purple">0</span></a></li>
              
                  </ul>
               </div>
               <div class="panel with-nav-tabs panel-default">
                  <div class="panel-body">
                     <div class="tab-content">
                        <div class="tab-pane fade in active" id="tab1default">
                           <div class="col-md-6">
                              <div class="col-md-12 no-padding ">
                                 <div class="box box-primary">
                                    <div class="box-header with-border">
                                       <h3 class="box-title">Check Recieved Information</h3>
									    <div class="box-tools">
                <button type="button" class="btn btn-box-tool bg-blue pull-right" data-toggle="tooltip" data-placement="top" title="Refresh">
                  <i class="fa fa-refresh"></i>
                  <div class="ripple-container"></div>
                </button>

              </div>
                                    </div>
                                   
                                       <div class="box-body top20">
                                         <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="mdl-selectfield">
                                                            <ng-template #senderItemTemplate let-model="item" let-index="index">
                                                                <ul class="autocomplete-ul" style="width: 280px; padding-left:0px;">
                                                                    <li>
                                                                        {{model.name}}
                                                                    </li>
                                                                </ul>
                                                            </ng-template>

                                                            <input autocomplete="off" class="mdl-selectfield" [(ngModel)]="selectedSender"
                                                                name="selectedSenderAuto" (typeaheadOnSelect)="senderSelectChange($event)"
                                                                [typeahead]="suppliersList" typeaheadOptionField="name"
                                                                [typeaheadScrollable]="true" [typeaheadItemTemplate]="senderItemTemplate"
                                                                [typeaheadOptionsInScrollableView]="5" placeholder="Search Sender">
                                                            <label>Agent Select </label>
                                                    </div>


                                                  <!--<div class="group">


                                                                    <input type="text"  name="" placeholder="Pleasent Holidays" [(ngModel)]="check.senderId" >
                                                                    <span class="highlight"></span>
                                                                    <span class="bar"></span>
                                                                    <label>Check Sender</label>
                                                                </div>-->
                                                </div>
                                                <div class="col-sm-6">
												 <div class="group">
                                                                    <input type="text"  name="" disabled="disabled" [(ngModel)]="check.recipient" >
                                                                    <span class="highlight"></span>
                                                                    <span class="bar"></span>
                                                                    <label  ></label>
                                                                </div>
                                                  
                                                </div>
                                             </div>
                                          <div class="row">
                                                <div class="col-sm-6">
                                                   <div class="group">
                                                                    <input type="text"  name="" [(ngModel)]="check.checkNumber" placeholder="123456">
                                                                    <span class="highlight"></span>
                                                                    <span class="bar"></span>
                                                                    <label>Check Number</label>
                                                                </div>
                                                </div>
                                                <div class="col-sm-6">
                                                  <div class="group">
                                                                    <input type="date"  name="endDate" [(ngModel)]="check.datevalue" >
                                                                    <span class="highlight"></span>
                                                                    <span class="bar"></span>
                                                                    <label>Check Date</label>
                                                                </div>
                                                </div>
                                             </div>
                                             <div class="row">
                                                <div class="col-sm-6">
                                                   <div class="group">
                                                        <input type="number"  name="amount" [(ngModel)]="check.amount"  >
                                                        <span class="highlight"></span>
                                                        <span class="bar"></span>
                                                        <label>Check Amount</label>
                                                    </div>
                                                </div>
                                                
                                             </div>
                                         
                                       </div>
                                       <div class="box-footer">
									    <button type="button" class="btn bg-red roundbtn btn-flat margin pull-left" (click)="deleteCheck()" >
                                             Delete
                                             <div class="ripple-container"></div>
                                          </button>
                                          <button type="button" class="btn bg-gray roundbtn btn-flat margin" routerLink="/checksreceiveds" >
                                             Close
                                             <div class="ripple-container"></div>
                                          </button>
                                         <button type="button" class="btn bg-blue roundbtn btn-flat margin" (click)="saveCheck()" >
                                             Save
                                             <div class="ripple-container"></div>
                                          </button>
										  <button type="button" class="btn bg-green btn-flat roundbtn margin" (click)="saveCheck(1)" >
                                             Save & Close
                                             <div class="ripple-container"></div>
                                          </button>
                                         
                                       </div>
                                    
                                 </div>
                              </div>
                             
                           </div>
                            <div class="col-md-6">
							 <div class="col-md-12 no-padding ">
                                 <div class="box box-primary">
                                    <div class="box-header with-border">
                                       <h3 class="box-title">Check Summary</h3>
									     <div class="box-tools">
                                            <button *ngIf="isEditMode" type="button" class="btn btn-box-tool bg-blue pull-right" data-toggle="tooltip" data-placement="top" title="Download">
                                            <i class="fa fa-download"></i>
                                            <div class="ripple-container"></div>
                                            </button>

                                        </div>
                                    </div>
                                   
                                    
                                      
                        <div class="box-body top20">
                            
                            <div class="row">
                                <div class="col-sm-12 table-responsive">
                                    <ng-container *ngIf="!isEditMode">
                                        <h6 class="text-center">
                                            <i class="fa fa-warning text-yellow"></i> The
                                            <span class="text-danger">check summary</span> will be available once the check has been created.</h6>
                                    </ng-container>
                                    <table class="table" *ngIf= "isEditMode">
									   <tr>
                                            <th colspan="3" class="txtlink curPnter">Actions</th>
                                            
                                        </tr>
										 <tr >
                                            <td colspan="3">Check Actions<br>
											<small>Accept a check once you are finished modifying it. on recall it if you would like to modify it further. <br>Please note a check can only be deleted in the event the check has no <br>bookings and no adjustments associated with it.</small>
											</td>
                                            
                                        </tr>
										 <tr >
                                            <td colspan="3">Export to your favorite format<br>
											<small>Click the download icon inside the header, and then choose the format you would like the checks exported to.</small>
											</td>
                                            
                                        </tr>
                                        <tr>
                                            <th></th>
                                            <th>#</th>
                                            <th>Amount Recieved</th>
                                        </tr>
                                      
                                        <tr >
                                            <td>Booking Payments</td>
                                            <td>{{PtotalRecords}}</td>
                                            <td>${{check.bookingPayments}}</td>
                                        </tr>
									   <tr >
                                            <td>Commission Adjustments</td>
                                            <td>0</td>
                                            <td>$0.00</td>
                                        </tr>
									   <tr >
                                            <td><strong>Amount Reconciled</strong></td>
                                            <td class="text-success"><strong>{{PtotalRecords}}</strong></td>
                                            <td class="text-success"><strong>${{check.reconciledAmount}}</strong></td>
                                        </tr>
										<tr >
                                            <td><strong>Amount Not Reconciled</strong></td>
                                            <td class="text-success"><strong>--</strong></td>
                                            <td class="text-success"><strong>${{check.amount-check.reconciledAmount}}</strong></td>
                                        </tr>

                                    </table>
                                </div>
                            </div>  
                                            
                                           
                        </div>
                                         
                                      
                                    
                                 </div>
                              </div>
							</div>
                        </div>
                        <div class="tab-pane fade" id="tab2default">
                         <div class="col-md-12">
							 <div class="col-md-12 no-padding ">
                                 <div class="box box-primary">
                                    <div class="box-header with-border">
                                       <h3 class="box-title">Bookings</h3>
									     <div class="box-tools">
                <button type="button" class="btn btn-box-tool bg-blue pull-right" data-toggle="tooltip" data-placement="top" title="Refresh">
                  <i class="fa fa-refresh"></i>
                  <div class="ripple-container"></div>
                </button>

              </div>
                                    </div>
                                   
                                    
                                      
                                          <div class="box-body top20">
                                             <div class="row">
                                <div class="col-sm-12 table-responsive">
                                    <ngx-spinner [bdColor]="spinnerConfig.bdColor" [size]="spinnerConfig.size" [color]="spinnerConfig.color"></ngx-spinner>

                                    <table class="table">
									   <tr>
                                            <th colspan="3" style="text-align:center;">Bookings</th>
                                             <th colspan="2" style="text-align:center;" >Trips</th>
											  <th colspan="3" style="text-align:center;" >Commission</th>
                                        </tr>
										
                                        <tr>
                                            <th>Number</th>
                                              <th>Type</th>
                                              
                                              <th>Tour Operator</th>
                                              
                                               <th>Group Number</th>
                                              <th>Description</th>
                                              
                                              
                                              <th>Earned</th>
                                              <th>Paid</th>
                                              <th></th>
                                          </tr>
                                         
                                          <tr *ngFor="let booking of Pbookings" >
                                            <td class="txtlink">{{booking.bookingNumber}}</td>
                                                <td><small class="label bg-green">Booking</small></td>
                                               
                                                 <td>{{booking.tourOperator}}</td>
                                                 
                                                 <td>-</td>
                                                 <td>{{booking.description}}</td>
                                            
                                               
                                                <td>${{booking.earned}}</td>
                                                <td>${{booking.receivedAmount}}</td>
                                                 <td> <a > <i class="material-icons blueicon" data-toggle="modal" data-target="#amountModel" (click)="editReconcilation(booking._id,booking.bookingId,booking.receivedAmount)" title="Edit">mode_edit</i></a>
                                                <a> <i class="material-icons delete" data-toggle="tooltip" data-placement="top" title="Delete">delete</i></a></td>
                                            </tr>
									  
										 <tr >
										<td class="txtlink"></td>
                                            <td></td>
                                           
											 <td></td>
											 
											 <td></td>
											 <td></td>
										
                                           
                                            <td>Booking Payments</td>
                                            <td>${{check.bookingPayments}}</td>
											 <td></td>
                                        </tr>
										 <tr >
										<td class="txtlink"></td>
                                            <td></td>
                                           
											 <td></td>
											 
											 <td></td>
											 <td></td>
										
                                           
                                            <td><strong>Amount Reconciled</strong></td>
                                            <td><strong>${{check.reconciledAmount}}</strong></td>
											 <td></td>
                                        </tr>
										 <tr >
										<td class="txtlink"></td>
                                            <td></td>
                                           
											 <td></td>
											 
											 <td></td>
											 <td></td>
										
                                           
                                            <td><strong>Amount Not Reconciled</strong></td>
                                            <td><strong>${{check.amount-check.reconciledAmount}}</strong></td>
											 <td></td>
                                        </tr>

                                    </table>
                                </div>
                                <app-pagination [paginationList]="Pbookings" [showLimit]="true" [totalRecords]="PtotalRecords" [isSearching]="isSearching" (currentPageCountEvent)="PcurrentPageCountEvent($event)" (limitChangeEvent)="PlimitChangeEvent($event)">                           
                                </app-pagination>
                            </div>  
                                            
                                           
                                          </div>
                                        
                                      
                                    
                                 </div>
                              </div>
							</div>
							  <div class="col-md-12">
							 <div class="col-md-12 no-padding ">
        <ngx-spinner [bdColor]="spinnerConfig.bdColor" [size]="spinnerConfig.size" [color]="spinnerConfig.color"></ngx-spinner>

                                <div class="box box-primary">
                                    <div class="box-header with-border">
                                       <h3 class="box-title">Unpaid Bookings</h3>
									     <div class="box-tools">
                <button type="button" class="btn btn-box-tool bg-blue pull-right" data-toggle="tooltip" data-placement="top" title="Refresh" (click)="refreshUPbookingsList()">
                  <i class="fa fa-refresh"></i>
                  <div class="ripple-container"></div>
                </button>

              </div>
                                    </div>
                                   
                                    
                                      
                                          <div class="box-body top20">
                                             <div class="row">
                                <div class="col-sm-12 table-responsive">
                                    <table class="table">
									   <tr>
                                            <th colspan="3" style="text-align:center;">Bookings</th>
                                             <th colspan="2" style="text-align:center;" >Trips</th>
											  <th colspan="3" style="text-align:center;" >Commission</th>
                                        </tr>
										
                                        <tr>
										  <th>Number</th>
                                            <th>Type</th>
                                             <th>Start Date</th>
                                            <th>Tour Operator</th>
											
											 <th>Group Number</th>
                                            <th>Description</th>
											<th>Client Name</th>
											
                                            <th>Package Price</th>
											<th>Earned</th>
											<th></th>
                                        </tr>
                                      
                                        <tr *ngFor="let booking of UPbookings;let i = index" >
										<td  class="txtlink">{{booking.bookingNumber}}</td>
                                            <td><small class="label bg-green">{{booking.bookingStatus}}</small></td>
											 <td>{{booking.startDate}}</td>
											  <td>{{booking.tourOperatorId}}</td>
											  
											 <td>--</td>
											 <td>{{booking.description}} </td>
											 <td>/+ 0 Additional</td>
										
                                           
                                            <td> $ {{booking.packagePrice}} </td>
                                            <td>$ {{booking.commisionEarned}} </td>
											 <td> <a > <i class="material-icons blueicon" data-toggle="modal" data-target="#amountModel" title="Add" (click)="addReconciliation(booking._id,i)"  >mode_add</i></a></td>
                                        </tr>
										
									 
									  

                                    </table>
                                </div>
                                <app-pagination [paginationList]="UPbookings" [showLimit]="true" [totalRecords]="UPtotalRecords" [isSearching]="isSearching" (currentPageCountEvent)="UPcurrentPageCountEvent($event)" (limitChangeEvent)="UPlimitChangeEvent($event)">                           
                                </app-pagination>
                            </div>  
                                            
                                           
                                          </div>
                                        
                                      
                                    
                                 </div>
                              </div>
							</div>
                        </div>
                     <div class="tab-pane fade" id="tab3default">
					   <div class="col-md-12">
							 <div class="col-md-12 no-padding ">
                                 <div class="box box-primary">
                                    <div class="box-header with-border">
                                       <h3 class="box-title">Commission Adjustments</h3>
									     <div class="box-tools">
                <button type="button" class="btn btn-box-tool bg-blue pull-right" data-toggle="tooltip" data-placement="top" title="Refresh">
                  <i class="fa fa-refresh"></i>
                  <div class="ripple-container"></div>
                </button>

              </div>
                                    </div>
                                   
                                    
                                      
                                          <div class="box-body top20">
                                             <div class="row">
											 
                                <div class="col-sm-12 table-responsive">
                                    <table class="table">
									   <tr>
                                     
										
                                        <tr>
										  <th>Adjustment Description</th>
                                            <th>Adjustment Type</th>
                                            <th>Agent Name</th>
                                            <th>Company Name</th>
											
											 <th>Created By</th>
                                            <th>Created On</th>
											
											<th>Amount</th>
                                           <th></th>
                                        </tr>
                                         <tr >
										<td>  <div class="form-group form-group-sm search is-empty" ><input class="form-control" type="text" placeholder="Adjustment Description"  name="agent"></div></td>
                                            <td></td>
                                            <td></td>
											 <td></td>
											 
											 <td></td>
											 <td></td>
										
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        <tr >
										<td>Ad Coop</td>
                                            <td><small class="label bg-green">Company Coop</small></td>
                                            <td>---</td>
											 <td>Happy Traveler</td>
											 
											 <td>Doster, Ron</td>
											 <td>Mar, 8, 2016 2:55PM</td>
										
                                            <td>$150.00</td>
                                            <td> <a > <i class="material-icons blueicon" data-toggle="tooltip" data-placement="top" title="Edit">mode_edit</i></a>
                                            <a> <i class="material-icons delete" data-toggle="tooltip" data-placement="top" title="Delete">delete</i></a></td>
                                        </tr>
										<tr >
										<td></td>
                                            <td></td>
                                            <td></td>
											 <td></td>
											 
											 <td></td>
											 <td>Commission Adjustment</td>
										
                                            <td>$150.00</td>
                                            <td></td>
                                        </tr>
									  <tr >
										<td></td>
                                            <td></td>
                                            <td></td>
											 <td></td>
											 
											 <td></td>
											 <td><strong>Amount Reconciled</strong></td>
										
                                            <td class="text-success"><strong>$150.00</strong></td>
                                            <td></td>
                                        </tr>
										 <tr >
										<td></td>
                                            <td></td>
                                            <td></td>
											 <td></td>
											 
											 <td></td>
											 <td><strong>Amount Not Reconciled</strong></td>
										
                                            <td class="text-success"><strong>$2850.00</strong></td>
                                            <td></td>
                                        </tr>
                                    </table>
                                </div>
                            </div>  
                                            
                                           
                                          </div>
                                        
                                      
                                    
                                 </div>
                              </div>
							</div>
                        <div class="col-md-12">
							 <div class="col-md-12 no-padding ">
                                 <div class="box box-primary">
                                    <div class="box-header with-border">
                                       <h3 class="box-title">Outstanding Adjustments</h3>
									     <div class="box-tools">
                <button type="button" class="btn btn-box-tool bg-blue pull-right" data-toggle="tooltip" data-placement="top" title="Refresh">
                  <i class="fa fa-refresh"></i>
                  <div class="ripple-container"></div>
                </button>

              </div>
                                    </div>
                                   
                                    
                                      
                                          <div class="box-body top20">
                                             <div class="row">
											 
                                <div class="col-sm-12 table-responsive">
                                    <table class="table">
									   <tr>
                                     
										
                                        <tr>
										  <th>Adjustment Description</th>
                                            <th>Adjustment Type</th>
                                            <th>Agent Name</th>
                                            <th>Company Name</th>
											
											 <th>Created By</th>
                                            <th>Created On</th>
											
											<th>Amount</th>
                                           <th></th>
                                        </tr>
                                         <tr >
										<td>  <div class="form-group form-group-sm search is-empty" ><input class="form-control" type="text" placeholder="Adjustment Description"  name="agent"></div></td>
                                            <td></td>
                                            <td></td>
											 <td></td>
											 
											 <td></td>
											 <td></td>
										
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        <tr >
										<td>Ad Coop</td>
                                            <td><small class="label bg-green">Company Coop</small></td>
                                            <td>---</td>
											 <td>Happy Traveler</td>
											 
											 <td>Doster, Ron</td>
											 <td>Mar, 8, 2016 2:55PM</td>
										
                                            <td>$150.00</td>
                                            <td> <a> <i class="material-icons blueicon" >mode_add </i></a></td>
                                        </tr>
										
									  
                                    </table>
                                </div>
                            </div>  
                                            
                                           
                                          </div>
                                        
                                      
                                    
                                 </div>
                              </div>
							</div>
							
                        </div>
                      
                     </div>
                  </div>
               </div>
            </div>
         </section>
    
</div>

<div id="amountModel" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <form #taskForm="ngForm">
                <div class="modal-header">
                    <button type="button" #btnModelClose data-dismiss="modal" class="close">&times;</button>
                    <h4 class="modal-title">Received Amount</h4>
                </div>
                <br><br>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="group">
                                <input type="number" required [(ngModel)]="receivedModel.receivedAmount" #received="ngModel" name="receivedAmount">
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>Received Amount*</label>
                                
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn bg-gray roundbtn btn-flat margin" #btnModelClose data-dismiss="modal">
                                                 Close
                                                 <div class="ripple-container"></div>
                                              </button>
                    <button type="button" class="btn bg-navy btn-flat roundbtn margin" (click)="saveReconciliation()">
                                                 Save
                                                 <div class="ripple-container"></div>
                                              </button>

                </div>
            </form>
        </div>

    </div>
</div>